!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-captcha",["exports","@angular/core","@angular/forms","@angular/common"],e):e(t["ngx-captcha"]={},t.ng.core,t.ng.forms,t.ng.common)}(this,function(t,a,e,n){"use strict";var r=function(){function t(t,e,n,r){this.renderer=t,this.zone=e,this.injector=n,this.scriptService=r,this.captchaElemPrefix="ngx_captcha_id_",this.type="image",this.tabIndex=0,this.success=new a.EventEmitter,this.load=new a.EventEmitter,this.ready=new a.EventEmitter,this.setupAfterLoad=!1,this.resetCaptchaAfterSuccess=!1,this.isLoaded=!1}return t.prototype.ngAfterViewInit=function(){this.control=this.injector.get(e.NgControl).control},t.prototype.ngOnChanges=function(t){t&&t.hl&&(t.hl.firstChange||t.hl.currentValue===t.hl.previousValue||this.scriptService.cleanup()),this.setupComponent()},t.prototype.getResponse=function(){return this.reCaptchaApi.getResponse(this.captchaId)},t.prototype.getCaptchaId=function(){return this.captchaId},t.prototype.resetCaptcha=function(){var t=this;this.zone.run(function(){t.onChange(undefined),t.onTouched(undefined)})},t.prototype.getCurrentResponse=function(){return this.currentResponse},t.prototype.reloadCaptcha=function(){this.setupComponent()},t.prototype.ensureCaptchaElem=function(t){var e=document.getElementById(t);if(!e)throw Error("Captcha element with id '"+t+"' was not found");this.captchaElem=e},t.prototype.renderReCaptcha=function(){var t=this;this.zone.runOutsideAngular(function(){t.captchaId=t.reCaptchaApi.render(t.captchaElemId,t.getCaptchaProperties()),t.ready.next()})},t.prototype.handleCallback=function(t){var e=this;this.currentResponse=t,this.success.next(t),this.zone.run(function(){e.onChange(t),e.onTouched(t)}),this.resetCaptchaAfterSuccess&&this.resetCaptcha()},t.prototype.getPseudoUniqueNumber=function(){return(new Date).getUTCMilliseconds()+Math.floor(9999*Math.random())},t.prototype.setupComponent=function(){var e=this;this.captchaSpecificSetup(),this.createAndSetCaptchaElem(),this.scriptService.registerCaptchaScript("explicit",function(t){e.onloadCallback(t)},this.hl)},t.prototype.onloadCallback=function(t){if(this.reCaptchaApi=t,!this.reCaptchaApi)throw Error("ReCaptcha Api was not initialized correctly");this.isLoaded=!0,this.load.next(),this.renderReCaptcha(),this.setupAfterLoad&&(this.setupAfterLoad=!1,this.setupComponent())},t.prototype.generateNewElemId=function(){return this.captchaElemPrefix+this.getPseudoUniqueNumber()},t.prototype.createAndSetCaptchaElem=function(){if(this.captchaElemId=this.generateNewElemId(),!this.captchaElemId)throw Error("Captcha elem Id is not set");this.captchaWrapperElem.nativeElement.innerHTML="";var t=this.renderer.createElement("div");t.id=this.captchaElemId,this.renderer.appendChild(this.captchaWrapperElem.nativeElement,t),this.ensureCaptchaElem(this.captchaElemId)},t.prototype.writeValue=function(t){},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.propDecorators={siteKey:[{type:a.Input}],type:[{type:a.Input}],hl:[{type:a.Input}],tabIndex:[{type:a.Input}],success:[{type:a.Output}],load:[{type:a.Output}],ready:[{type:a.Output}],captchaWrapperElem:[{type:a.ViewChild,args:["captchaWrapperElem"]}],captchaScriptElem:[{type:a.ViewChild,args:["captchaScriptElem"]}]},t}(),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p={InvisibleReCaptcha:0,ReCaptcha2:1};p[p.InvisibleReCaptcha]="InvisibleReCaptcha",p[p.ReCaptcha2]="ReCaptcha2";var s=function(){function t(t){this.zone=t,this.windowGrecaptcha="grecaptcha",this.windowOnLoadCallbackProperty="ngx_captcha_onload_callback"}return t.prototype.registerCaptchaScript=function(t,e,n){var r=this;if(this.grecaptchaScriptLoaded())this.zone.run(function(){e(window[r.windowGrecaptcha])});else{window[this.windowOnLoadCallbackProperty]=function(){return r.zone.run(e.bind(r,window[r.windowGrecaptcha]))};var o=document.createElement("script");o.innerHTML="",o.src=this.getCaptchaScriptUrl(t,n),o.async=!0,o.defer=!0,document.getElementsByTagName("head")[0].appendChild(o)}},t.prototype.cleanup=function(){window[this.windowOnLoadCallbackProperty]=undefined,window[this.windowGrecaptcha]=undefined},t.prototype.grecaptchaScriptLoaded=function(){return!(!window[this.windowOnLoadCallbackProperty]||!window[this.windowGrecaptcha])},t.prototype.getLanguageParam=function(t){return t?"&hl="+t:""},t.prototype.getCaptchaScriptUrl=function(t,e){return"https://www.google.com/recaptcha/api.js?onload="+this.windowOnLoadCallbackProperty+"&render="+t+this.getLanguageParam(e)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:a.NgZone}]},t}(),i=function(i){function t(t,e,n,r){var o=i.call(this,t,e,n,r)||this;return o.renderer=t,o.zone=e,o.injector=n,o.scriptService=r,o.size="invisible",o.badge="bottomright",o.recaptchaType=p.InvisibleReCaptcha,o}return c(t,i),t.prototype.ngOnChanges=function(t){i.prototype.ngOnChanges.call(this,t)},t.prototype.execute=function(){var t=this;this.zone.runOutsideAngular(function(){return t.reCaptchaApi.execute(t.captchaId)})},t.prototype.captchaSpecificSetup=function(){},t.prototype.getCaptchaProperties=function(){var e=this;return{sitekey:this.siteKey,callback:function(t){return e.zone.run(function(){return e.handleCallback(t)})},badge:this.badge,type:this.type,tabindex:this.tabIndex,size:this.size}},t.decorators=[{type:a.Component,args:[{selector:"ngx-invisible-recaptcha",template:"\n  <div #captchaWrapperElem></div>",providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:a.forwardRef(function(){return t}),multi:!0}]}]}],t.ctorParameters=function(){return[{type:a.Renderer2},{type:a.NgZone},{type:a.Injector},{type:s}]},t.propDecorators={badge:[{type:a.Input}],hl:[{type:a.Input}]},t}(r),h=function(i){function t(t,e,n,r){var o=i.call(this,t,e,n,r)||this;return o.renderer=t,o.zone=e,o.injector=n,o.scriptService=r,o.windowOnErrorCallbackProperty="ngx_captcha_error_callback",o.windowOnExpireCallbackProperty="ngx_captcha_expire_callback",o.theme="light",o.size="normal",o.expire=new a.EventEmitter,o.error=new a.EventEmitter,o.recaptchaType=p.ReCaptcha2,o}return c(t,i),t.prototype.ngOnChanges=function(t){i.prototype.ngOnChanges.call(this,t)},t.prototype.ngOnDestroy=function(){window[this.windowOnErrorCallbackProperty]={},window[this.windowOnExpireCallbackProperty]={}},t.prototype.captchaSpecificSetup=function(){this.registerCallbacks()},t.prototype.getCaptchaProperties=function(){var e=this;return{sitekey:this.siteKey,callback:function(t){return e.zone.run(function(){return e.handleCallback(t)})},"expired-callback":function(){return e.zone.run(function(){return e.handleExpireCallback()})},"error-callback":function(){return e.zone.run(function(){return e.handleErrorCallback()})},theme:this.theme,type:this.type,size:this.size,tabindex:this.tabIndex}},t.prototype.registerCallbacks=function(){window[this.windowOnErrorCallbackProperty]=this.handleErrorCallback.bind(this),window[this.windowOnExpireCallbackProperty]=this.handleExpireCallback.bind(this)},t.prototype.handleErrorCallback=function(){var t=this;this.zone.run(function(){t.onChange(undefined),t.onTouched(undefined)}),this.error.next()},t.prototype.handleExpireCallback=function(){this.expire.next(),this.resetCaptcha()},t.decorators=[{type:a.Component,args:[{selector:"ngx-recaptcha2",template:"\n  <div #captchaWrapperElem></div>",providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:a.forwardRef(function(){return t}),multi:!0}]}]}],t.ctorParameters=function(){return[{type:a.Renderer2},{type:a.NgZone},{type:a.Injector},{type:s}]},t.propDecorators={theme:[{type:a.Input}],size:[{type:a.Input}],hl:[{type:a.Input}],expire:[{type:a.Output}],error:[{type:a.Output}]},t}(r),u=function(){function t(t,e){this.scriptService=t,this.zone=e}return t.prototype.execute=function(e,n,r){var o=this;this.scriptService.registerCaptchaScript(e,function(t){o.zone.runOutsideAngular(function(){t.execute(e,{action:n}).then(function(t){o.zone.run(function(){return r(t)})})})})},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:s},{type:a.NgZone}]},t}(),l=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{imports:[n.CommonModule],declarations:[h,i],providers:[s,u],exports:[h,i]}]}],t}();t.BaseReCaptchaComponent=r,t.InvisibleReCaptchaComponent=i,t.ReCaptcha2Component=h,t.ReCaptchaType=p,t.ScriptService=s,t.ReCaptchaV3Service=u,t.NgxCaptchaModule=l,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-captcha.umd.min.js.map